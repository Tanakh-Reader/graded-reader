{% load static %}

{% load widget_tweaks %}
{% load list_extras %}
{% load json %}

<div class="flex items-center justify-center">
    <div id="list-comparisons"
         class="hidden max-w-3xl flex-col items-center">

        <!-- Summary div -->

        <div class="my-10 flex w-fit space-x-6 rounded-md bg-slate-50 p-4 shadow-md">
            <div class="flex flex-col gap-3">
                <p class="text-2xl">Comparison Summary</p>
                <div id ="summary-heading"></div>
            </div>
            <div id="summary-passages"
                 class="flex flex-col gap-1 text-sm"></div>
        </div>

        <!-- Passage Lists Spreadsheet -->

        <div class="relative flex justify-center gap-3">
            <div id="column-1"
                 class="mr-52 flex flex-col items-end gap-1">
                <!-- Column 1 Header -->
                <div class="mb-2 font-bold">Algorithm 1</div>
                <!-- Column 1 Items -->
                {% for item in listA %}
                    <div class="flex flex-row gap-4">
                        <div class="passage-index hover:cursor-pointer hover:font-bold hover:text-blue-500 index-{{ forloop.counter }}"
                             data-index="{{ forloop.counter }}">
                            {{ forloop.counter }}
                        </div>
                        <div class="col-1 passage-item flex w-60 overflow-hidden rounded-md border border-black"
                             data-definition="{{ item.0|to_json }}"
                             data-penalties="{{ item.2|to_json }}"
                             data-id="{{ item.0.id }}"
                             data-index="{{ forloop.counter }}">
                            <div class="w-1/3 bg-red-100 px-2">{{ item.1 }}</div>
                            <div class="w-2/3 bg-gray-100 px-2 text-right">
                                {{ item.0.reference_abbr }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div id="column-2"
                 class="flex flex-col items-start gap-1">
                <!-- Column 2 Header -->
                <div class="mb-2 font-bold">Algorithm 2</div>
                <!-- Column 2 Items -->
                {% for item in listB %}
                    <div class="flex flex-row gap-4">
                        <div class="col-2 passage-item flex w-60 overflow-hidden rounded-md border border-black"
                             data-definition="{{ item.0|to_json }}"
                            data-penalties="{{ item.2|to_json }}"
                             data-id="{{ item.0.id }}"
                             data-index="{{ forloop.counter }}">
                            <div class="w-2/3 bg-gray-100 px-2">{{ item.0.reference_abbr }}</div>
                            <div class="w-1/3 bg-red-100 px-2">{{ item.1 }}</div>
                        </div>
                        <div class="passage-index index-{{ forloop.counter }}">
                            {{ forloop.counter }}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>

        <div id="passage-text"
             class="my-14 w-3/4"
             data-id="{{ passage.id }}"></div>
    </div>
</div>

<!-- div displayed when a passage is hovered over -->
<div id="hover-text"
     class="absolute z-50 hidden rounded border border-gray-400 bg-white px-1 shadow-lg">
</div>

<script src="{% static 'js/libraries/leader-line.min.js' %}"></script>
